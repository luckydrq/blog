---
title: 树莓派上搭建blog
date: '2014-06-02'
description:
permalink: /2014-06-02/pi-blog
categories:
- tools
tags:
- pi
---

在PI上搭建blog是非常平常且让那些极客们嗤之以鼻的事情，而且网上已经有不少这样的文章，比如[我同事的这篇文章](http://defworld.com/2013-05/build-your-blog-with-gor-and-pi.html)，里面还引用了许多先人们的文章。那为啥我还要写这么一篇文章？好吧，首先我不是极客，可以没有极客的节操。其次时代在进步，有些先人们遇到的坑已被填平，而新的坑又在等着我。最后是给自己的一个交代，好歹也折腾了好几天。。。

我是个懒人，因此搭建博客也是按照先人们的方案来搞得（基于```GOR```搭建）。当初就是看上了它应用的```bootstrap```的界面风格，很简洁。不废话，下面我就直接进行总结：

### Go安装

直接用官网```go1.2.2.linux-386.tar.gz```这个版本的包就行了，编译、测试都能通过（时间有点长）。不需要按先人们所说的用什么```TIP```分支的代码。另外，不要在PI上直接下载tar包，那样会很慢。先下载到自己的机器再```scp```到PI上。

### SSL故障

不知道是个例还是所有这个批次的Respbian都有这个问题(我的内核版本是3.12.19+)，在进行https连接时报CA证书校验失败，导致直接https用不了。网上找了一堆解决方案都不行。于是，直接重新安装了```openssl```，得以解决。

### DDNS

在给PI设置固定的局域网IP，并给路由器设置了端口转发规则之后，接下来要搞定的就是动态DNS的问题，因为路由器的公网IP是会变化的，这样在域名解析的时候也需要动态更新IP。一开始，我用的是同事文章里的这段```python```[脚本](https://gist.github.com/chuangbo/833369)，但是不知道为什么，当路由器IP变化的时候，dnspod上还是没有更新过来，导致博客直接就挂掉了。就这样过了两三周一直拖着没做，今天有空就用nodejs根据dnspod提供的开放api写了一个简单的更新A记录的客户端（其实之前已经有人实现了一个比较完备的，但在PI上却跑不起来，node环境v0.10.28），其实就是一个命令，具体用法看[这里](https://github.com/luckydrq/dnspod-ddns2)，就不多说了。把这行命令粘贴到```/etc/rc.local```里，可以实现开机自启动。

大概就这么多，欢迎交流。